(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{2448:function(e,t,r){"use strict";var n=r(6156),a=r(5893),o=(r(7294),r(1860)),i=r(9166),c=r(1577),s=r(1511);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}o.Z.option;t.Z=function(e){var t=e.handleSubmit,r=e.handleImage,n=e.handleChange,l=e.course,d=e.setCourse,p=e.preview,h=(e.setPreview,e.uploadButtonText),f=e.handleImageRemove;e.handleUploadImageClick;return(0,a.jsx)("div",{className:"pt-3 pb-3",children:(0,a.jsxs)("form",{onSubmit:t,encType:"multiparto",children:[(0,a.jsx)("div",{className:"form-group m  t-3 mt-3",children:(0,a.jsx)("input",{type:"text",name:"name",className:"form-control",placeholder:"Name of the course",value:l.name,onChange:n,id:"course_name"})}),(0,a.jsx)("div",{className:"form-group  mt-3 mt-3",children:(0,a.jsx)("textarea",{style:{width:"100%"},name:"description",id:"course_description",cols:"8",rows:"8",value:l.description,onChange:n,placeholder:"Course description"})}),(0,a.jsxs)("div",{className:"form-row d-flex flex-row mt-3 mt-3",children:[(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsxs)(o.Z,{style:{width:"100%"},size:"large",value:l.paid,onChange:function(e){return d(u(u({},l),{},{paid:!l.paid}))},children:[(0,a.jsx)("option",{value:!0,children:"Paid course"}),(0,a.jsx)("option",{value:!1,children:"Free course"})]})})}),l.paid&&(0,a.jsx)("div",{className:"col-md-2 offset-md-1",children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(o.Z,{name:"prices_array",defaultValue:"$9.99",style:{width:"100%"},id:"prices_array",size:"large",onChange:function(e){return d(u(u({},l),{},{price:e}))},children:function(){for(var e=[],t=9.99;t<=99.9;t++)e.push((0,a.jsxs)("option",{children:[" ",t.toFixed(2)," "]},t.toFixed(2)));return e}()})})})]}),(0,a.jsx)("div",{className:"form-group mt-3 mt-3",children:(0,a.jsx)("input",{type:"text",name:"category",className:"form-control",placeholder:"category",value:l.category,onChange:n,id:"course_category"})}),(0,a.jsx)("div",{className:"form-row mt-3 mt-3",children:(0,a.jsxs)("div",{className:"row d-flex align-content-center justify-content-start",children:[(0,a.jsx)("div",{className:"form-group col-md-2 col-5 mt-3",children:(0,a.jsxs)("label",{style:{width:"100%"},className:"btn btn-outline-secondary btn-block text-left",children:[l.loading&&!h?"Uploading":l.loading||h?h:"image Upload",(0,a.jsx)("input",{type:"file",name:"image",onChange:r,accept:"image/*",hidden:!0})]})}),p&&(0,a.jsx)("div",{className:"col-md-2 col-1 mt-3",children:(0,a.jsx)(i.Z,{className:"pointer",count:"X",onClick:f,children:(0,a.jsx)(s.Z,{width:200,src:p})})})]})}),(0,a.jsx)("div",{className:"row  mt-3 mt-3",children:(0,a.jsx)("div",{className:"col",children:(0,a.jsx)(c.Z,{type:"primary",size:"large",shape:"round",onClick:t,disabled:l.loading||l.uploading,className:"btn btn-primary",loading:l.loading,children:l.loading?"file is uploading":"save & continue"})})})]})})}},8545:function(e,t,r){"use strict";r(5893),r(1664),r(7294)},9981:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n=r(5893),a=r(7757),o=r.n(a),i=r(2137),c=r(7294),s=r(9669),l=r.n(s),u=r(1163),d=(r(8545),r(5592)),p=r(2807),h=r(1664),f=function(){var e=(0,c.useState)(""),t=e[0],r=e[1];return(0,c.useEffect)((function(){r(window.location.pathname)}),[window.location.pathname]),(0,n.jsxs)("div",{className:"nav flex-column nav-pills",children:[(0,n.jsx)(h.default,{href:"/instructor",children:(0,n.jsx)("a",{className:"nav-link ".concat("/instructor"===t&&"active"),children:"Instructor Dashboard"})}),(0,n.jsx)(h.default,{href:"/instructor/course/create",children:(0,n.jsx)("a",{className:"nav-link ".concat("/instructor/course/create"===t&&"active"),children:"create course"})})]})},g=function(e){var t=e.children,r=(0,u.useRouter)(),a=(0,c.useState)(!0),s=a[0],h=a[1],g=(0,c.useContext)(p._),m=g.state;g.dispatch;return(0,c.useEffect)((function(){(function(){var e=(0,i.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().get("/api/current-instructor");case 3:t=e.sent,t.data.ok&&h(!1),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),h(!0),console.error(e.t0),m.user?r.push("/"):r.push("/login");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),(0,n.jsx)(n.Fragment,{children:s?(0,n.jsx)(d.Z,{spin:!0,className:"d-flex justify-content-center text-center p-2"}):(0,n.jsx)("div",{className:"container-fluid",children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"nav-side col-md-2",children:(0,n.jsx)(f,{})}),(0,n.jsx)("div",{className:"main-content col-md-10",children:t})]})})})}},9778:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(5893),a=r(7757),o=r.n(a),i=r(6156),c=r(2137),s=r(9981),l=r(2448),u=r(7294),d=r(6770),p=r.n(d),h=r(9249),f=r(9669),g=r.n(f);var m=r(1163);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=function(e){var t=e.submitUrl,r=(0,m.useRouter)(),a=r.query.slug,d=(0,u.useState)(""),f=d[0],v=d[1],w=(0,u.useState)(""),j=w[0],x=w[1],y=(0,u.useState)(""),O=y[0],k=y[1],N=(0,u.useState)({name:"",description:"",category:"",price:"",uploading:"",paid:!0,loading:!1}),P=N[0],S=N[1];(0,u.useEffect)((function(){(function(){var e=(0,c.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g().get("/api/course/".concat(a));case 2:t=e.sent,console.log("==> respose with undefined",t),t.data&&(console.log(t),S(b(b({},P),t.data)),v(t.data.image_preview));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]);var C=function(){var e=(0,c.Z)(o().mark((function e(t){var r,n,a,i,c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.files[0],n=window.URL.createObjectURL(r),(a=new FormData).append("imageFile",r),S(b(b({},P),{},{loading:!0})),null===a.entries().next().value[1]){e.next=25;break}return e.prev=6,e.next=9,g().post("/api/course/upload-image",a,{onUploadProgress:function(e){console.log("Uploading : "+(e.loaded/e.total*100).toString()+"%")}});case 9:i=e.sent,c=i.data,v(n),S(b(b({},P),{},{loading:!1})),k(c.imageUri),(s=r.name).length>=10&&(s=s.slice(0,10)+"..."),x(s),k(c.imageUri),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(6),console.log(e.t0.response.data),S(b(b({},P),{},{loading:!1})),(0,h.Am)(e.t0.response.data);case 25:case 26:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,c.Z)(o().mark((function e(t){var r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.files[0],n=window.URL.createObjectURL(r),(a=new FormData).append("imageFile",r),S(b(b({},P),{},{loading:!0})),null!==a.entries().next().value[1])try{p().imageFileResizer(r,200,150,"JPEG",100,0,function(){var e=(0,c.Z)(o().mark((function e(t){var i,c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.append("imageFile",t),e.next=3,g().post("/api/course/upload-image",a,{onUploadProgress:function(e){console.log("Uploading : "+(e.loaded/e.total*100).toString()+"%")}});case 3:i=e.sent,c=i.data,v(n),S(b(b({},P),{},{loading:!1})),k(c.imageUri),(s=r.name).length>=10&&(s=s.slice(0,10)+"..."),x(s),k(c.imageUri);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"file")}catch(i){console.log(i.response.data),S(b(b({},P),{},{loading:!1})),(0,h.Am)(i.response.data)}case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=(0,c.Z)(o().mark((function e(n){var a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t||"/api/course",n.preventDefault(),e.next=4,g().post(a,b(b({},P),{},{image_preview:"https://basicstorage1414.blob.core.windows.net/test-container/".concat(O)}));case 4:i=e.sent,r.push("/instructor"),console.log(i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=(0,c.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P.loading){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,g().post("/api/image/image-preview/delete",{blobName:O});case 5:t=e.sent,t.data,v(""),k(""),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),(0,h.Am)("Ipage uplaoed has failed try later on!");case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s.Z,{children:[(0,n.jsx)("h1",{className:"jumbotron text-center square p-5",children:" Create Course"}),(0,n.jsx)(l.Z,{handleChange:function(e){S(b(b({},P),{},(0,i.Z)({},e.target.name,e.target.value)))},handleImage:Z,handleSubmit:U,course:P,setCourse:S,preview:f,setPreview:v,uploadButtonText:j,handleImageRemove:F,handleUploadImageClick:C}),O&&(0,n.jsx)("img",{src:"https://basicstorage1414.blob.core.windows.net/test-container/".concat(O),alt:"rc"})]})})}},6770:function(e){(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};t.r(r),t.d(r,{default:()=>a});var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t;return(t=[{key:"changeHeightWidth",value:function(e,t,r,n,a,o){return r>n&&(e=Math.round(e*n/r),r=n),e>t&&(r=Math.round(r*t/e),e=t),a&&r<a&&(e=Math.round(e*a/r),r=a),o&&e<o&&(r=Math.round(r*o/e),e=o),{height:e,width:r}}},{key:"resizeAndRotateImage",value:function(e,t,r,n,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=i/100,l=document.createElement("canvas"),u=e.width,d=e.height,p=this.changeHeightWidth(d,r,u,t,n,a);!c||90!==c&&270!==c?(l.width=p.width,l.height=p.height):(l.width=p.height,l.height=p.width),u=p.width,d=p.height;var h=l.getContext("2d");return h.fillStyle="rgba(0, 0, 0, 0)",h.fillRect(0,0,u,d),c&&(h.rotate(c*Math.PI/180),90===c?h.translate(0,-l.width):180===c?h.translate(-l.width,-l.height):270===c?h.translate(-l.height,0):0!==c&&360!==c||h.translate(0,0)),h.drawImage(e,0,0,u,d),l.toDataURL("image/".concat(o),s)}},{key:"b64toByteArrays",value:function(e,t){t=t||"image/jpeg";for(var r=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),n=[],a=0;a<r.length;a+=512){for(var o=r.slice(a,a+512),i=new Array(o.length),c=0;c<o.length;c++)i[c]=o.charCodeAt(c);var s=new Uint8Array(i);n.push(s)}return n}},{key:"b64toBlob",value:function(e,t){var r=this.b64toByteArrays(e,t);return new Blob(r,{type:t,lastModified:new Date})}},{key:"b64toFile",value:function(e,t,r){var n=this.b64toByteArrays(e,r);return new File(n,t,{type:r,lastModified:new Date})}},{key:"createResizedImage",value:function(t,r,n,a,o,i,c){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,d=new FileReader;if(!t)throw Error("File Not Found!");if(t.type&&!t.type.includes("image"))throw Error("File Is NOT Image!");d.readAsDataURL(t),d.onload=function(){var p=new Image;p.src=d.result,p.onload=function(){var d=e.resizeAndRotateImage(p,r,n,l,u,a,o,i),h="image/".concat(a);switch(s){case"blob":var f=e.b64toBlob(d,h);c(f);break;case"base64":c(d);break;case"file":var g=t.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(a.toString()),m=e.b64toFile(d,g,h);c(m);break;default:c(d)}}},d.onerror=function(e){throw Error(e)}}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e,t),e}();const a={imageFileResizer:function(e,t,r,a,o,i,c,s,l,u){return n.createResizedImage(e,t,r,a,o,i,c,s,l,u)}};e.exports=r})()}}]);