(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[255],{5592:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},c=n(76),a=function(e,t){return r.createElement(c.Z,Object.assign({},e,{ref:t,icon:s}))};a.displayName="SyncOutlined";var i=r.forwardRef(a)},8545:function(e,t,n){"use strict";n(5893),n(1664),n(7294)},9981:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(5893),s=n(7757),c=n.n(s),a=n(2137),i=n(7294),o=n(9669),l=n.n(o),u=n(1163),d=(n(8545),n(5592)),p=n(2807),f=n(1664),h=function(){var e=(0,i.useState)(""),t=e[0],n=e[1];return(0,i.useEffect)((function(){n(window.location.pathname)}),[window.location.pathname]),(0,r.jsxs)("div",{className:"nav flex-column nav-pills",children:[(0,r.jsx)(f.default,{href:"/instructor",children:(0,r.jsx)("a",{className:"nav-link ".concat("/instructor"===t&&"active"),children:"Instructor Dashboard"})}),(0,r.jsx)(f.default,{href:"/instructor/course/create",children:(0,r.jsx)("a",{className:"nav-link ".concat("/instructor/course/create"===t&&"active"),children:"create course"})})]})},v=function(e){var t=e.children,n=(0,u.useRouter)(),s=(0,i.useState)(!0),o=s[0],f=s[1],v=(0,i.useContext)(p._),m=v.state;v.dispatch;return(0,i.useEffect)((function(){(function(){var e=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().get("/api/current-instructor");case 3:t=e.sent,t.data.ok&&f(!1),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),f(!0),console.error(e.t0),m.user?n.push("/"):n.push("/login");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),(0,r.jsx)(r.Fragment,{children:o?(0,r.jsx)(d.Z,{spin:!0,className:"d-flex justify-content-center text-center p-2"}):(0,r.jsx)("div",{className:"container-fluid",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"nav-side col-md-2",children:(0,r.jsx)(h,{})}),(0,r.jsx)("div",{className:"main-content col-md-10",children:t})]})})})}},2551:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var r=n(5893),s=n(6156),c=n(7757),a=n.n(c),i=n(2137),o=n(9669),l=n.n(o),u=n(1163),d=n(7294),p=n(9981),f=n(8453),h=n(9713),v=n(1577),m=n(7888),x=n(7385),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},j=n(76),b=function(e,t){return d.createElement(j.Z,Object.assign({},e,{ref:t,icon:g}))};b.displayName="EditOutlined";var w=d.forwardRef(b),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M764 280.9c-14-30.6-33.9-58.1-59.3-81.6C653.1 151.4 584.6 125 512 125s-141.1 26.4-192.7 74.2c-25.4 23.6-45.3 51-59.3 81.7-14.6 32-22 65.9-22 100.9v27c0 6.2 5 11.2 11.2 11.2h54c6.2 0 11.2-5 11.2-11.2v-27c0-99.5 88.6-180.4 197.6-180.4s197.6 80.9 197.6 180.4c0 40.8-14.5 79.2-42 111.2-27.2 31.7-65.6 54.4-108.1 64-24.3 5.5-46.2 19.2-61.7 38.8a110.85 110.85 0 00-23.9 68.6v31.4c0 6.2 5 11.2 11.2 11.2h54c6.2 0 11.2-5 11.2-11.2v-31.4c0-15.7 10.9-29.5 26-32.9 58.4-13.2 111.4-44.7 149.3-88.7 19.1-22.3 34-47.1 44.3-74 10.7-27.9 16.1-57.2 16.1-87 0-35-7.4-69-22-100.9zM512 787c-30.9 0-56 25.1-56 56s25.1 56 56 56 56-25.1 56-56-25.1-56-56-56z"}}]},name:"question",theme:"outlined"},N=function(e,t){return d.createElement(j.Z,Object.assign({},e,{ref:t,icon:y}))};N.displayName="QuestionOutlined";var O=d.forwardRef(N),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},Z=function(e,t){return d.createElement(j.Z,Object.assign({},e,{ref:t,icon:k}))};Z.displayName="UploadOutlined";var P=d.forwardRef(Z),C=n(4549),L=n(9508),E=n(8749),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM676.1 657.9c4.4 5.2.7 13.1-6.1 13.1h-58.9c-4.7 0-9.2-2.1-12.3-5.7L512 561.8l-86.8 103.5c-3 3.6-7.5 5.7-12.3 5.7H354c-6.8 0-10.5-7.9-6.1-13.1L470.2 512 347.9 366.1A7.95 7.95 0 01354 353h58.9c4.7 0 9.2 2.1 12.3 5.7L512 462.2l86.8-103.5c3-3.6 7.5-5.7 12.3-5.7H670c6.8 0 10.5 7.9 6.1 13.1L553.8 512l122.3 145.9z"}}]},name:"close-square",theme:"filled"},_=function(e,t){return d.createElement(j.Z,Object.assign({},e,{ref:t,icon:S}))};_.displayName="CloseSquareFilled";var z=d.forwardRef(_);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(e){var t=e.setLessonValues,n=e.lessonValues,s=e.handleAddLesson,c=(e.setUploading,e.uploading),a=e.handelVideo,i=e.videoTitel,o=e.uploadProgress,l=e.handleVideoRemove;return(0,r.jsxs)("div",{className:"container addLesson-formContainer pt-3",children:[(0,r.jsxs)("form",{action:"",encType:"multipart/form-data",onSubmit:s,children:[(0,r.jsx)("input",{type:"text",name:"lesson-title-input",className:"form-control square",id:"lesson-title-input",autoFocus:!0,required:!0,onChange:function(e){return t(A(A({},n),{},{title:e.target.value}))},value:n.title,placeholder:"title..."}),(0,r.jsx)("textarea",{name:"",className:"form-control mt-3",cols:"7",rows:"7",onChange:function(e){return t(A(A({},n),{},{content:e.target.value}))},values:n.content,placeholder:"Content... "}),(0,r.jsxs)("div",{className:"video_input col d-flex align-items-center",children:[(0,r.jsxs)("label",{htmlFor:"video",className:"btn col-4 btn-dark btn-block text-left mt-3",children:[i||(c?"uplaoding ...":"upload video"),(0,r.jsx)("input",{type:"file",accept:"video/*",name:"video",hidden:!0,onChange:function(e){return a(e)},id:"video"})]}),c&&(0,r.jsx)("div",{className:"mt-3 col-3",children:(0,r.jsx)(E.Z,{style:{marginLeft:"12px"},type:"circle",percent:o,width:40})}),!c&&n.video&&(0,r.jsx)("div",{className:"mt-3  d-flex align-items-center col-1 justify-content-center",children:(0,r.jsx)(h.Z,{title:"Remove",children:(0,r.jsx)("span",{onClick:l,children:(0,r.jsx)(z,{className:"text-danger d-flex justify-content-center  pointer"})})})})]}),(0,r.jsx)(v.Z,{onClick:function(e){s(e),t({content:"",title:"",video:""})},className:"col mt-3",size:"large",type:"primary",loading:c,shape:"round",disabled:!n.content||!n.title,children:c&&n.video?"uploading Lesson ...":c&&!n.video?"uploading video":"add lesson"})]}),(0,r.jsxs)("pre",{children:[" ",JSON.stringify(n,null,4)," "]}),"*"]})},M=n(9249),T=n(7215);n(1664);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(){var e,t=(0,d.useState)({}),n=t[0],s=t[1],c=(0,d.useState)({title:"",content:"",video:""}),o=c[0],g=c[1],j=(0,d.useState)(!1),b=j[0],y=j[1],N=(0,d.useState)(!1),k=N[0],Z=N[1],E=(0,d.useState)(""),S=E[0],_=E[1],z=(0,d.useState)(0),V=z[0],A=z[1],R=(0,u.useRouter)(),F=R.query.slug;(0,d.useEffect)((function(){(function(){var e=(0,i.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("/api/course/".concat(F));case 2:t=e.sent,console.log("xxx=>",t.data),s(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[F]);var H=function(){var e=(0,i.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),y(!0),e.prev=2,e.next=5,l().post("/api/course/lesson/addlesson/".concat(F),q({},o));case 5:n=e.sent,r=n.data,y(!1),(0,M.Am)("".concat(o.title," lesson was succefully added")),s(q({},r)),g(q(q({},o),{},{content:"",title:"",video:""})),_(""),Z(!1),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0),y(!1),(0,M.Am)(e.t0.response.data);case 20:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=(0,i.Z)(a().mark((function e(t){var n,r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.target.files[0],y(!0),(r=new FormData).append("video",n),e.next=7,l().post("/api/video/upload",r,{onUploadProgress:function(e){A(Math.round(100*e.loaded)/e.total)}});case 7:s=e.sent,y(!1),g(q(q({},o),{},{video:s.data})),_(n.name.length>=10?n.name.slice(0,10)+"...":n.name),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0.response.data),y(!1),(0,M.Am)(e.t0.response.data);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=(0,i.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.video.split("/evideos/")[1].split(".mp4")[0],e.prev=1,y(!0),e.next=5,l().get("/api/course/video/remove/".concat(F,"/").concat(t));case 5:e.sent,g(q(q({},o),{},{video:{videoUrl:""}})),_(""),y(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),y(!1),(0,M.Am)("video removing failed :( ");case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,i.Z)(a().mark((function e(t,r){var c,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().put("/api/course/publish/".concat(F,"/").concat(r));case 3:c=e.sent,i=c.data,s(q(q({},n),{},{published:!0})),console.log(i),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),(0,M.Am)("publish has failed because this error: ".concat(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=(0,i.Z)(a().mark((function e(t,r){var c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().put("/api/course/unpublish/".concat(F,"/").concat(r));case 3:c=e.sent,c.data,s(q(q({},n),{},{published:!1})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),(0,M.Am)("unpublish has failed because this error: ".concat(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,r.jsx)(p.Z,{children:(0,r.jsx)("div",{className:"container-fluid pt-3",children:n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"media d-flex pb-2 pt-2 shadow-lg p-3 mb-2 rounded",style:{backgroundColor:"#f5f5f5"},children:[(0,r.jsx)(f.C,{size:80,src:n.image_preview?n.image_preview:"./course.png"}),(0,r.jsx)("div",{className:"body-container w-50",children:(0,r.jsx)("div",{className:"media-body",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("h5",{style:{marginTop:"-10px",marginLeft:"10px"},className:"mt-2 ml-5 text-primary",children:n.name}),(0,r.jsxs)("p",{style:{marginTop:"-10px",marginLeft:"10px"},children:[n.lessons&&n.lessons.length,"  lesson"]}),(0,r.jsxs)("p",{style:{marginTop:"-10px",marginLeft:"10px"},children:[n.lessons&&n.category," "]})]})})})}),(0,r.jsxs)("div",{className:"course-control d-flex",children:[(0,r.jsx)("div",{className:"control-left",onClick:function(){return R.push("/instructor/course/edit/".concat(F))},style:{paddingTop:"6px"},children:(0,r.jsx)(h.Z,{title:"Edit",className:"ml-4",children:(0,r.jsx)(w,{className:"h5 pointer text-warning "})})}),(0,r.jsx)("div",{className:"control-right",style:{marginLeft:"19px",paddingTop:"6px"},children:n.lessons&&n.lessons.length<5?(0,r.jsx)(h.Z,{title:"Min 5 lessons required to publish",children:(0,r.jsx)(O,{className:"h5 pointer text-danger"})}):n.published?(0,r.jsxs)(h.Z,{onClick:function(e){return X(e,n._id)},title:"unpublish",className:"h5 pointer text-danger",children:["   ",(0,r.jsx)(C.Z,{}),"   "]}):(0,r.jsx)(h.Z,{onClick:function(e){return I(e,n._id)},title:"Publish",children:(0,r.jsx)(L.Z,{className:"h5 pointer text-success"})})})]})]}),(0,r.jsx)("div",{className:"description-box pl-5",children:(0,r.jsxs)("p",{className:"pb-2 pt-2 shadow-lg p-3 mb-2 rounded",children:[(0,r.jsx)("b",{style:{},children:"Description: "}),n.description]})}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)(v.Z,{onClick:function(){return Z(!0)},className:"col-md-2 offset-md-3 text-center",type:"primary",shape:"round",icon:(0,r.jsx)(P,{}),children:"Add lesson"}),(0,r.jsx)(m.Z,{title:"+ Add Lesson",centered:!0,visible:k,onCancel:function(){return Z(!1)},footer:null,children:(0,r.jsx)(D,{setLessonValues:g,lessonValues:o,setUploading:y,uploading:b,handleAddLesson:H,visible:k,handelVideo:B,setVideoTitel:_,videoTitel:S,uploadProgress:V,handleVideoRemove:U})}),(0,r.jsxs)("div",{className:"row pl-5",children:[(0,r.jsx)("div",{className:"col  lesson-list",children:(0,r.jsxs)("h4",{children:[(null===(e=n.lessons)||void 0===e?void 0:e.length)||0," lessons"]})}),(0,r.jsx)(x.ZP,{itemLayout:"horizental",dataSource:null===n||void 0===n?void 0:n.lessons,renderItem:function(e,t){return(0,r.jsx)(T.default,{className:"shadow-sm p-3 mb-5 bg-white rounded",children:(0,r.jsx)(T.default.Meta,{avatar:(0,r.jsx)(f.C,{children:t+1}),title:e.title})})}})]})]})]})})})}},9501:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/instructor/course/view/[slug]",function(){return n(2551)}])}},function(e){e.O(0,[577,576,860,67,74,774,888,179],(function(){return t=9501,e(e.s=t);var t}));var t=e.O();_N_E=t}]);